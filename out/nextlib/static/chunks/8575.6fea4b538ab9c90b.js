(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8575,3920],{3621:function(n,e,t){"use strict";t.r(e),t.d(e,{BlockchainContext:function(){return b},TokenStatus:function(){return r},useBlockchainContext:function(){return v}});var r,c=t(7568),o=t(828),u=t(4051),a=t.n(u),i=t(5893),s=t(7294),f=t(241),d=t(6076),C=t(7948),h=t(333),p=t(3920),l=t(3454);!function(n){n.Burned="BURN",n.Minted="MINT",n.Waiting="WAIT"}(r||(r={}));var A={metamask:void 0,contractConnection:void 0,getWriteConnection:function(){},clearWriteConnection:function(){},signer:void 0,chainId:"0x0",latestBlockNum:0,loadSigner:function(){},changeChainManually:function(n){},tokenInfo:new Map,setTokenInfo:function(n){},isOwner:!1,isSubscriber:!1},_=s.createContext(A),v=function(){return s.useContext(_)},b=function(n){var e=n.child,t=window&&window.ethereum,r=(0,o.Z)(s.useState(),2),u=r[0],A=r[1],v=(0,o.Z)(s.useState(),2),b=v[0],w=v[1],k=(0,o.Z)(s.useState(),2),x=k[0],N=k[1],E=(0,o.Z)(s.useState("0x0"),2),S=E[0],T=E[1],m=(0,o.Z)(s.useState(0),2),I=m[0],P=m[1],R=(0,o.Z)(s.useState(new Map),2),O=R[0],g=R[1],Z=(0,o.Z)(s.useState(!1),2),D=Z[0],M=Z[1],y=(0,o.Z)(s.useState(!1),2),H=y[0];y[1];t&&t.on("chainChanged",(function(n){window&&window.location.reload()})),t&&t.on("accountsChanged",(function(n){n[0]!==x&&(x||b)&&F()}));var B=function(){var n=(0,c.Z)(a().mark((function n(){var e,r,c,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&p.SUPPORTED_CHAINS.includes(S)){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,e=p.CONTRACT_INFO[S],r=new f.Q(t),c=r.getSigner(),o=new d.CH(e.address,e.abi,c),w(o),N(c._address),n.abrupt("return",o);case 12:n.prev=12,n.t0=n.catch(2),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(){return n.apply(this,arguments)}}(),W=function(){var n=(0,c.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=b,n.t0){n.next=5;break}return n.next=4,B();case 4:n.t0=n.sent;case 5:return n.abrupt("return",n.t0);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Y=function(){var n=(0,c.Z)(a().mark((function n(){var e,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.request({method:"eth_requestAccounts"});case 2:(e=n.sent).length>0&&(r=e[0],N(r));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),F=function(){w(void 0),N(void 0)},K=function(){if(p.SUPPORTED_CHAINS.includes(S)&&(!u||u.provider.network.chainId!==Number(S))){var n,e=p.CONTRACT_INFO[S];t?n=new f.Q(t):(n=C.yl(Number(S),{etherscan:l.env.REACT_APP_ETHERSCAN_API_KEY,infura:"-",alchemy:l.env.REACT_APP_ALCHEMY_API_KEY,pocket:"-",ankr:"-"}),n=new h.D(Number(S),l.env.REACT_APP_ALCHEMY_API_KEY));var r=new d.CH(e.address,e.abi,n);r.name().then((function(n){n===p.CONTRACT_NAME&&A(r)}))}},U={metamask:t,chainId:S,signer:x,contractConnection:u,getWriteConnection:W,clearWriteConnection:F,latestBlockNum:I,loadSigner:Y,changeChainManually:function(n){T(n),F(),K(),g(new Map)},tokenInfo:O,setTokenInfo:g,isOwner:D,isSubscriber:H};return s.useEffect((function(){function n(){return(n=(0,c.Z)(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.request({method:"eth_chainId"});case 2:e=n.sent,T(e);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t?function(){n.apply(this,arguments)}():T("0x5")}),[]),s.useEffect((function(){K()}),[S]),s.useEffect((function(){u&&(u.on("Transfer",(function(n,e,t,r){P(r.blockNumber)})),x&&u.balanceOf(x).then((function(n){M(n>0)})))}),[u]),(0,i.jsx)(_.Provider,{value:U,children:e})}},3920:function(n,e,t){"use strict";t.r(e),t.d(e,{CHAIN_ID_TO_NAME:function(){return o},CONTRACT_INFO:function(){return i},CONTRACT_NAME:function(){return a},PARAGRAPH_SPACING:function(){return c},SUPPORTED_CHAINS:function(){return s},ZERO_ADDRESS:function(){return u}});var r=t(6971),c=5,o={"0x0":"Not connected","0x1":"Ethereum","0x3":"Ropsten","0x4":"Rinkeby","0x5":"Goerli","0x2a":"Kovan"},u="0x0000000000000000000000000000000000000000",a="PoemPathfinder",i={"0x4":{address:"0xDeE90CcC0ebD4b1cf3373621946b8fee22660f47",abi:r.abi,openSeaLink:"https://testnets.opensea.io/collection/poempathfinder"},"0x5":{address:"0x9b92C19698D61E6f8899CAD25390857FAD6eA5Cc",abi:r.abi}},s=Object.keys(i)},6601:function(){}}]);