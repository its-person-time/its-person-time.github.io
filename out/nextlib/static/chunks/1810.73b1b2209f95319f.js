(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1810,8575,3650,3920],{3621:function(e,n,t){"use strict";t.r(n),t.d(n,{BlockchainContext:function(){return v},TokenStatus:function(){return r},useBlockchainContext:function(){return g}});var r,o=t(7568),c=t(828),a=t(4051),s=t.n(a),i=t(5893),u=t(7294),l=t(241),f=t(6076),d=t(7948),h=t(333),x=t(3920),C=t(3454);!function(e){e.Burned="BURN",e.Minted="MINT",e.Waiting="WAIT"}(r||(r={}));var p={metamask:void 0,contractConnection:void 0,getWriteConnection:function(){},clearWriteConnection:function(){},signer:void 0,chainId:"0x0",latestBlockNum:0,loadSigner:function(){},changeChainManually:function(e){},tokenInfo:new Map,setTokenInfo:function(e){},isOwner:!1,isSubscriber:!1},m=u.createContext(p),g=function(){return u.useContext(m)},v=function(e){var n=e.child,t=window&&window.ethereum,r=(0,c.Z)(u.useState(),2),a=r[0],p=r[1],g=(0,c.Z)(u.useState(),2),v=g[0],k=g[1],b=(0,c.Z)(u.useState(),2),w=b[0],A=b[1],S=(0,c.Z)(u.useState("0x0"),2),_=S[0],T=S[1],y=(0,c.Z)(u.useState(0),2),N=y[0],j=y[1],E=(0,c.Z)(u.useState(new Map),2),I=E[0],P=E[1],M=(0,c.Z)(u.useState(!1),2),O=M[0],R=M[1],Z=(0,c.Z)(u.useState(!1),2),B=Z[0];Z[1];t&&t.on("chainChanged",(function(e){window&&window.location.reload()})),t&&t.on("accountsChanged",(function(e){e[0]!==w&&(w||v)&&Y()}));var D=function(){var e=(0,o.Z)(s().mark((function e(){var n,r,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&x.SUPPORTED_CHAINS.includes(_)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=x.CONTRACT_INFO[_],r=new l.Q(t),o=r.getSigner(),c=new f.CH(n.address,n.abi,o),k(c),A(o._address),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=v,e.t0){e.next=5;break}return e.next=4,D();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,o.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"eth_requestAccounts"});case 2:(n=e.sent).length>0&&(r=n[0],A(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){k(void 0),A(void 0)},F=function(){if(x.SUPPORTED_CHAINS.includes(_)&&(!a||a.provider.network.chainId!==Number(_))){var e,n=x.CONTRACT_INFO[_];t?e=new l.Q(t):(e=d.yl(Number(_),{etherscan:C.env.REACT_APP_ETHERSCAN_API_KEY,infura:"-",alchemy:C.env.REACT_APP_ALCHEMY_API_KEY,pocket:"-",ankr:"-"}),e=new h.D(Number(_),C.env.REACT_APP_ALCHEMY_API_KEY));var r=new f.CH(n.address,n.abi,e);r.name().then((function(e){e===x.CONTRACT_NAME&&p(r)}))}},q={metamask:t,chainId:_,signer:w,contractConnection:a,getWriteConnection:H,clearWriteConnection:Y,latestBlockNum:N,loadSigner:W,changeChainManually:function(e){T(e),Y(),F(),P(new Map)},tokenInfo:I,setTokenInfo:P,isOwner:O,isSubscriber:B};return u.useEffect((function(){function e(){return(e=(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"eth_chainId"});case 2:n=e.sent,T(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t?function(){e.apply(this,arguments)}():T("0x5")}),[]),u.useEffect((function(){F()}),[_]),u.useEffect((function(){a&&(a.on("Transfer",(function(e,n,t,r){j(r.blockNumber)})),w&&a.balanceOf(w).then((function(e){R(e>0)})))}),[a]),(0,i.jsx)(m.Provider,{value:q,children:n})}},5982:function(e,n,t){"use strict";t.r(n),t.d(n,{BurnModal:function(){return i}});var r=t(828),o=t(5893),c=t(7294),a=t(7742),s=t(2562),i=function(){var e=(0,r.Z)(c.useState(0),2),n=e[0],t=e[1];return(0,o.jsx)(s.ContractWriteModal,{triggerButtonText:"Destroy",triggerButtonColorScheme:"red",header:"Destroy a gem",confirmButtonText:"Burn",inProgressMessage:"destroying...",successMessage:"Destroyed!",modalBody:(0,o.jsxs)(o.Fragment,{children:["This will burn your token. Doing so will take us one step closer to our final poem. You may only destroy a gem you own. Are you ready? Note that this action requires Metamask.",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Select a gem to destroy:",(0,o.jsxs)(a.Y2,{min:0,max:6,onChange:function(e,n){return t(n)},value:n,children:[(0,o.jsx)(a.zu,{}),(0,o.jsxs)(a.Fi,{children:[(0,o.jsx)(a.WQ,{}),(0,o.jsx)(a.Y_,{})]})]})]}),callContract:function(e){return e.burn(n)}})}},2562:function(e,n,t){"use strict";t.r(n),t.d(n,{ContractWriteModal:function(){return C}});var r=t(7568),o=t(828),c=t(4051),a=t.n(c),s=t(5893),i=t(7294),u=t(8538),l=t(7741),f=t(7927),d=t(9755),h=t(1943),x=t(3621),C=function(e){var n=e.triggerButtonText,t=e.triggerButtonColorScheme,c=e.header,C=e.confirmButtonText,p=e.inProgressMessage,m=e.successMessage,g=e.modalBody,v=e.callContract,k=e.onSuccess,b=e.onError,w=(0,x.useBlockchainContext)(),A=w.contractConnection,S=w.getWriteConnection,_=w.metamask,T=(0,d.q)(),y=T.isOpen,N=T.onOpen,j=T.onClose,E=(0,o.Z)(i.useState(!1),2),I=E[0],P=E[1],M=(0,o.Z)(i.useState(),2),O=M[0],R=M[1],Z=(0,o.Z)(i.useState(),2),B=Z[0],D=Z[1],H=function(){var e=(0,r.Z)(a().mark((function e(){var n,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return D("This action requires Metamask."),e.abrupt("return");case 3:return e.next=5,S();case 5:if(n=e.sent){e.next=9;break}return D("Could not get a write connection to the contract on this network"),e.abrupt("return");case 9:return P(!0),D(void 0),e.prev=11,e.next=14,v(n);case 14:return t=e.sent,e.next=17,t.wait();case 17:R(t.hash),P(!1),k(),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(11),console.log(e.t0),(r=e.t0.message.match(/reason":"(.+)","code/))&&r.length>1?(D(r[1]),b(r[1])):(D(e.t0.reason),b(e.t0.reason)),P(!1);case 28:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.zx,{colorScheme:t,onClick:N,disabled:!A,children:n}),(0,s.jsxs)(u.u_,{isOpen:y,onClose:function(){D(void 0),P(!1),j()},children:[(0,s.jsx)(u.ZA,{}),(0,s.jsxs)(u.hz,{children:[(0,s.jsx)(u.xB,{children:c}),(0,s.jsx)(u.ol,{}),!I&&!O&&!B&&(0,s.jsx)(u.fe,{children:g}),B&&(0,s.jsxs)(u.fe,{children:["Error: ",B," Check the dev console for details."]}),!B&&O&&(0,s.jsxs)(u.fe,{children:[m," You can see the transaction"," ",(0,s.jsx)(f.rU,{color:"cyan.500",href:"https://rinkeby.etherscan.io/tx/".concat(O),children:"here"}),"."]}),I&&(0,s.jsx)(u.fe,{children:(0,s.jsxs)(f.kC,{width:"100%",height:"100%",alignItems:"center",gap:5,padding:30,children:[(0,s.jsx)(h.D8,{isIndeterminate:!0,color:"yellow.400"}),(0,s.jsx)("div",{children:p})]})}),(0,s.jsx)(u.mz,{children:(0,s.jsx)(l.zx,{colorScheme:"blue",mr:3,onClick:H,children:C})})]})]})]})}},3920:function(e,n,t){"use strict";t.r(n),t.d(n,{CHAIN_ID_TO_NAME:function(){return c},CONTRACT_INFO:function(){return i},CONTRACT_NAME:function(){return s},PARAGRAPH_SPACING:function(){return o},SUPPORTED_CHAINS:function(){return u},ZERO_ADDRESS:function(){return a}});var r=t(6971),o=5,c={"0x0":"Not connected","0x1":"Ethereum","0x3":"Ropsten","0x4":"Rinkeby","0x5":"Goerli","0x2a":"Kovan"},a="0x0000000000000000000000000000000000000000",s="PoemPathfinder",i={"0x4":{address:"0xDeE90CcC0ebD4b1cf3373621946b8fee22660f47",abi:r.abi,openSeaLink:"https://testnets.opensea.io/collection/poempathfinder"},"0x5":{address:"0x9b92C19698D61E6f8899CAD25390857FAD6eA5Cc",abi:r.abi}},u=Object.keys(i)},6601:function(){}}]);