(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1543,8575,3650,3920],{3621:function(e,n,t){"use strict";t.r(n),t.d(n,{BlockchainContext:function(){return g},TokenStatus:function(){return r},useBlockchainContext:function(){return v}});var r,o=t(7568),c=t(828),a=t(4051),i=t.n(a),s=t(5893),u=t(7294),f=t(241),l=t(6076),h=t(7948),d=t(333),x=t(3920),p=t(3454);!function(e){e.Burned="BURN",e.Minted="MINT",e.Waiting="WAIT"}(r||(r={}));var C={metamask:void 0,contractConnection:void 0,getWriteConnection:function(){},clearWriteConnection:function(){},signer:void 0,chainId:"0x0",latestBlockNum:0,loadSigner:function(){},changeChainManually:function(e){},tokenInfo:new Map,setTokenInfo:function(e){},isOwner:!1,isSubscriber:!1},m=u.createContext(C),v=function(){return u.useContext(m)},g=function(e){var n=e.child,t=window&&window.ethereum,r=(0,c.Z)(u.useState(),2),a=r[0],C=r[1],v=(0,c.Z)(u.useState(),2),g=v[0],k=v[1],b=(0,c.Z)(u.useState(),2),w=b[0],S=b[1],A=(0,c.Z)(u.useState("0x0"),2),_=A[0],E=A[1],T=(0,c.Z)(u.useState(0),2),N=T[0],y=T[1],I=(0,c.Z)(u.useState(new Map),2),M=I[0],P=I[1],j=(0,c.Z)(u.useState(!1),2),B=j[0],O=j[1],R=(0,c.Z)(u.useState(!1),2),Z=R[0];R[1];t&&t.on("chainChanged",(function(e){window&&window.location.reload()})),t&&t.on("accountsChanged",(function(e){e[0]!==w&&(w||g)&&Y()}));var D=function(){var e=(0,o.Z)(i().mark((function e(){var n,r,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&x.SUPPORTED_CHAINS.includes(_)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=x.CONTRACT_INFO[_],r=new f.Q(t),o=r.getSigner(),c=new l.CH(n.address,n.abi,o),k(c),S(o._address),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=g,e.t0){e.next=5;break}return e.next=4,D();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,o.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"eth_requestAccounts"});case 2:(n=e.sent).length>0&&(r=n[0],S(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){k(void 0),S(void 0)},q=function(){if(x.SUPPORTED_CHAINS.includes(_)&&(!a||a.provider.network.chainId!==Number(_))){var e,n=x.CONTRACT_INFO[_];t?e=new f.Q(t):(e=h.yl(Number(_),{etherscan:p.env.REACT_APP_ETHERSCAN_API_KEY,infura:"-",alchemy:p.env.REACT_APP_ALCHEMY_API_KEY,pocket:"-",ankr:"-"}),e=new d.D(Number(_),p.env.REACT_APP_ALCHEMY_API_KEY));var r=new l.CH(n.address,n.abi,e);r.name().then((function(e){e===x.CONTRACT_NAME&&C(r)}))}},F={metamask:t,chainId:_,signer:w,contractConnection:a,getWriteConnection:H,clearWriteConnection:Y,latestBlockNum:N,loadSigner:W,changeChainManually:function(e){E(e),Y(),q(),P(new Map)},tokenInfo:M,setTokenInfo:P,isOwner:B,isSubscriber:Z};return u.useEffect((function(){function e(){return(e=(0,o.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"eth_chainId"});case 2:n=e.sent,E(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t?function(){e.apply(this,arguments)}():E("0x5")}),[]),u.useEffect((function(){q()}),[_]),u.useEffect((function(){a&&(a.on("Transfer",(function(e,n,t,r){y(r.blockNumber)})),w&&a.balanceOf(w).then((function(e){O(e>0)})))}),[a]),(0,s.jsx)(m.Provider,{value:F,children:n})}},2562:function(e,n,t){"use strict";t.r(n),t.d(n,{ContractWriteModal:function(){return p}});var r=t(7568),o=t(828),c=t(4051),a=t.n(c),i=t(5893),s=t(7294),u=t(8538),f=t(7741),l=t(7927),h=t(9755),d=t(1943),x=t(3621),p=function(e){var n=e.triggerButtonText,t=e.triggerButtonColorScheme,c=e.header,p=e.confirmButtonText,C=e.inProgressMessage,m=e.successMessage,v=e.modalBody,g=e.callContract,k=e.onSuccess,b=e.onError,w=(0,x.useBlockchainContext)(),S=w.contractConnection,A=w.getWriteConnection,_=w.metamask,E=(0,h.q)(),T=E.isOpen,N=E.onOpen,y=E.onClose,I=(0,o.Z)(s.useState(!1),2),M=I[0],P=I[1],j=(0,o.Z)(s.useState(),2),B=j[0],O=j[1],R=(0,o.Z)(s.useState(),2),Z=R[0],D=R[1],H=function(){var e=(0,r.Z)(a().mark((function e(){var n,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return D("This action requires Metamask."),e.abrupt("return");case 3:return e.next=5,A();case 5:if(n=e.sent){e.next=9;break}return D("Could not get a write connection to the contract on this network"),e.abrupt("return");case 9:return P(!0),D(void 0),e.prev=11,e.next=14,g(n);case 14:return t=e.sent,e.next=17,t.wait();case 17:O(t.hash),P(!1),k(),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(11),console.log(e.t0),(r=e.t0.message.match(/reason":"(.+)","code/))&&r.length>1?(D(r[1]),b(r[1])):(D(e.t0.reason),b(e.t0.reason)),P(!1);case 28:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.zx,{colorScheme:t,onClick:N,disabled:!S,children:n}),(0,i.jsxs)(u.u_,{isOpen:T,onClose:function(){D(void 0),P(!1),y()},children:[(0,i.jsx)(u.ZA,{}),(0,i.jsxs)(u.hz,{children:[(0,i.jsx)(u.xB,{children:c}),(0,i.jsx)(u.ol,{}),!M&&!B&&!Z&&(0,i.jsx)(u.fe,{children:v}),Z&&(0,i.jsxs)(u.fe,{children:["Error: ",Z," Check the dev console for details."]}),!Z&&B&&(0,i.jsxs)(u.fe,{children:[m," You can see the transaction"," ",(0,i.jsx)(l.rU,{color:"cyan.500",href:"https://rinkeby.etherscan.io/tx/".concat(B),children:"here"}),"."]}),M&&(0,i.jsx)(u.fe,{children:(0,i.jsxs)(l.kC,{width:"100%",height:"100%",alignItems:"center",gap:5,padding:30,children:[(0,i.jsx)(d.D8,{isIndeterminate:!0,color:"yellow.400"}),(0,i.jsx)("div",{children:C})]})}),(0,i.jsx)(u.mz,{children:(0,i.jsx)(f.zx,{colorScheme:"blue",mr:3,onClick:H,children:p})})]})]})]})}},5653:function(e,n,t){"use strict";t.r(n),t.d(n,{MintModal:function(){return u}});var r=t(828),o=t(5893),c=t(7294),a=t(3621),i=t(5553),s=t(2562),u=function(e){var n=e.onSuccess,t=e.onError,u=(0,a.useBlockchainContext)().contractConnection,f=(0,r.Z)(c.useState(""),2),l=f[0],h=f[1];c.useEffect((function(){u&&u._mintFee().then((function(e){var n=e/Math.pow(10,17);h(n.toString())}))}),[u]);return(0,o.jsx)(s.ContractWriteModal,{triggerButtonText:"Buy",triggerButtonColorScheme:"yellow",header:"Buy a gem",confirmButtonText:"Buy",inProgressMessage:"completing transaction...",successMessage:"Gem purchased!",modalBody:(0,o.jsxs)("span",{children:["This gem costs ",l," ETH. You may only buy one gem from The Shopkeeper directly. Ready? Note that this action requires Metamask."]}),callContract:function(e){return e.mint(!1,{value:i.fi(l)})},onSuccess:n,onError:t})}},3920:function(e,n,t){"use strict";t.r(n),t.d(n,{CHAIN_ID_TO_NAME:function(){return c},CONTRACT_INFO:function(){return s},CONTRACT_NAME:function(){return i},PARAGRAPH_SPACING:function(){return o},SUPPORTED_CHAINS:function(){return u},ZERO_ADDRESS:function(){return a}});var r=t(6971),o=5,c={"0x0":"Not connected","0x1":"Ethereum","0x3":"Ropsten","0x4":"Rinkeby","0x5":"Goerli","0x2a":"Kovan"},a="0x0000000000000000000000000000000000000000",i="PoemPathfinder",s={"0x4":{address:"0xDeE90CcC0ebD4b1cf3373621946b8fee22660f47",abi:r.abi,openSeaLink:"https://testnets.opensea.io/collection/poempathfinder"},"0x5":{address:"0x9b92C19698D61E6f8899CAD25390857FAD6eA5Cc",abi:r.abi}},u=Object.keys(s)},6601:function(){}}]);